<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Picks & Shovels™ Lite</title>
  <style>
    body{font-family:system-ui;margin:24px;max-width:900px}
    textarea{width:100%;min-height:90px}
    pre{white-space:pre-wrap;background:#f6f6f6;padding:12px;border-radius:10px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .pill{padding:6px 10px;border-radius:999px;background:#eee;font-size:12px}
  </style>
</head>
<body>
  <h1>Picks & Shovels™</h1>
  <div class="pill" id="modePill">DEMO MODE</div>

  <h3>License Key</h3>
  <input id="license" placeholder="Enter license key" style="width:320px" />
  <button id="activate">Activate</button>
  <p id="licenseMsg"></p>

  <h3>Analyze a trend</h3>
  <textarea id="trend" placeholder="e.g., AI agents, remote work enablement, GitHub apps..."></textarea>
  <div class="row">
    <button id="run">Generate</button>
    <button id="copy">Copy</button>
    <button id="download">Download</button>
  </div>

  <h3>Output</h3>
  <pre id="out">—</pre>

<script>
  const API_URL = "https://YOUR-PRIVATE-API.example.com/analyze"; // set to your backend
  let tier = "demo";

  function setMode(t){
    tier = t;
    document.getElementById("modePill").textContent = (t === "full") ? "LICENSED" : "DEMO MODE";
  }

  // super-light client check (real validation must be server-side)
  document.getElementById("activate").onclick = () => {
    const key = document.getElementById("license").value.trim();
    if(!key || key.length < 8){
      document.getElementById("licenseMsg").textContent = "Invalid license key format.";
      setMode("demo");
      return;
    }
    localStorage.setItem("ps_license", key);
    document.getElementById("licenseMsg").textContent = "Key saved. Full access is confirmed server-side.";
  };

  document.getElementById("run").onclick = async () => {
    const trend = document.getElementById("trend").value.trim();
    const licenseKey = localStorage.getItem("ps_license") || "";
    if(!trend) return;

    document.getElementById("out").textContent = "Running…";

    const res = await fetch(API_URL, {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ trend, licenseKey, tierHint: tier })
    });

    const data = await res.json();
    setMode(data.tier === "full" ? "full" : "demo");

    // render as plain text (simple + safe)
    let text = "";
    for (const [k,v] of Object.entries(data.sections || {})) {
      text += `\n=== ${k.toUpperCase()} ===\n${v}\n`;
    }
    if(data.watermark) text = "DEMO VERSION\n\n" + text;

    document.getElementById("out").textContent = text.trim();
  };

  document.getElementById("copy").onclick = async () => {
    await navigator.clipboard.writeText(document.getElementById("out").textContent);
  };

  document.getElementById("download").onclick = () => {
    const blob = new Blob([document.getElementById("out").textContent], {type:"text/plain"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "picks-and-shovels-output.txt";
    a.click();
  };
</script>

<footer style="margin-top:30px;font-size:12px;">
  <strong>Framework:</strong> Picks & Shovels™ by Adenike Omoregbee — Attribution required.
</footer>
</body>
</html>
